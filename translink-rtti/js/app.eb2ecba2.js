(function(){"use strict";var t={976:function(t,e,n){var o=n(963),r=n(252);function i(t,e){const n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(n)}var u=n(744);const a={},s=(0,u.Z)(a,[["render",i]]);var l=s,c=n(201);function p(t,e,n,o,i,u){var a=(0,r.up)("stop-schedule");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.stops,(function(t,e){return(0,r.wg)(),(0,r.iD)("div",{key:e},[(0,r.Wm)(a,{detail:t},null,8,["detail"])])})),128))]),(0,r._)("button",{onClick:e[0]||(e[0]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.load&&t.load.apply(t,e)})},"Refresh")],64)}var d=n(655),f={headers:{Accept:"application/json","Content-Type":"application/json"}},v=function(){function t(){}return t.stopEstimate=function(t){return(0,d.mG)(this,void 0,Promise,(function(){var e,n,o,r;return(0,d.Jh)(this,(function(i){switch(i.label){case 0:e="https://api.translink.ca/rttiapi/v1/stops/"+t.stopNo+"/estimates?apikey="+t.apiKey+"&routeNo="+t.routeNo,void 0!==t.count&&(e+="&count="+t.count),void 0!==t.timeFrame&&(e+="&timeframe="+t.timeFrame),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(e,f)];case 2:return n=i.sent(),[4,n.json()];case 3:if(o=i.sent(),n.ok)return[2,o[0]];throw new Error(o);case 4:throw r=i.sent(),r;case 5:return[2]}}))}))},t}(),h=n(577),w=function(t){return(0,r.dD)("data-v-6d9eb5d9"),t=t(),(0,r.Cn)(),t},m={colspan:"5"},y=w((function(){return(0,r._)("tr",null,[(0,r._)("td",null,"Destination"),(0,r._)("td",null,"Leaving At"),(0,r._)("td",null,"Arriving In"),(0,r._)("td",null,"Status"),(0,r._)("td",null,"Last Updated")],-1)}));function b(t,e,n,o,i,u){return(0,r.wg)(),(0,r.iD)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("td",m,(0,h.zw)(t.detail.routeNo)+" - Stop #"+(0,h.zw)(t.detail.stopNo),1)]),y]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.detail.list,(function(t,e){return(0,r.wg)(),(0,r.iD)("tr",{key:e,class:(0,h.C_)(t.status)},[(0,r._)("td",null,(0,h.zw)(t.destination),1),(0,r._)("td",null,(0,h.zw)(t.expectedLeaveTime),1),(0,r._)("td",null,(0,h.zw)(t.expectedCountdown),1),(0,r._)("td",null,(0,h.zw)(t.status),1),(0,r._)("td",null,(0,h.zw)(t.lastUpdate),1)],2)})),128))])])}var _=n(124),g=n(28),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,d.ZT)(e,t),(0,d.gn)([(0,g.fI)({required:!0})],e.prototype,"detail",void 0),e}(_.w3),N=k;const C=(0,u.Z)(N,[["render",b],["__scopeId","data-v-6d9eb5d9"]]);var x=C,O=function(){function t(){}return t.fromApiResponse=function(t){for(var e=[],n=0,o=t.Schedules;n<o.length;n++){var r=o[n],i="";if(r.CancelledStop||r.CancelledTrip)i="Cancelled";else if(r.ExpectedCountdown<0)i="Departed";else switch(r.ScheduleStatus){case" ":i="On Time";break;case"*":i="Scheduled";break;case"+":i="Early";break;case"-":i="Delayed";break}e.push({destination:r.Destination,expectedLeaveTime:r.ExpectedLeaveTime.split(" ")[0],expectedCountdown:r.ExpectedCountdown,status:i,lastUpdate:r.LastUpdate})}return e.sort((function(t,e){return t.expectedCountdown-e.expectedCountdown}))},t}(),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.filter=[{routeNo:"016",stopNo:51042,timeFrame:60},{routeNo:"009",stopNo:50907,timeFrame:60}],e.stops=[],e}return(0,d.ZT)(e,t),e.prototype.mounted=function(){this.load()},e.prototype.load=function(){var t=this;this.filter.forEach((function(e,n){return(0,d.mG)(t,void 0,void 0,(function(){var t,o,r,i,u;return(0,d.Jh)(this,(function(a){switch(a.label){case 0:return t=this.stops,o=n,u={routeNo:e.routeNo,stopNo:e.stopNo},i=(r=O).fromApiResponse,[4,v.stopEstimate({apiKey:this.apiKey,routeNo:e.routeNo,stopNo:e.stopNo,timeFrame:60})];case 1:return[2,t[o]=(u.list=i.apply(r,[a.sent()]),u)]}}))}))}))},(0,d.gn)([(0,g.fI)()],e.prototype,"apiKey",void 0),e=(0,d.gn)([(0,_.Ei)({components:{StopSchedule:x}})],e),e}(_.w3),j=D;const E=(0,u.Z)(j,[["render",p],["__scopeId","data-v-b5b845dc"]]);var T=E,K=[{path:"/stop-estimate/:apiKey",component:T,props:function(t){return{apiKey:t.params.apiKey}}}],S=(0,c.p7)({history:(0,c.r5)(),routes:K}),z=S;(0,o.ri)(l).use(z).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var u=1/0;for(c=0;c<t.length;c++){o=t[c][0],r=t[c][1],i=t[c][2];for(var a=!0,s=0;s<o.length;s++)(!1&i||u>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(a=!1,i<u&&(u=i));if(a){t.splice(c--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[o,r,i]}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,u=o[0],a=o[1],s=o[2],l=0;if(u.some((function(e){return 0!==t[e]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(s)var c=s(n)}for(e&&e(o);l<u.length;l++)i=u[l],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},o=self["webpackChunktranslink_rtti"]=self["webpackChunktranslink_rtti"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(976)}));o=n.O(o)})();
//# sourceMappingURL=app.eb2ecba2.js.map